{% extends "base.html" %}

{% block title %}New Preparation Method{% endblock %}

{% block content %}
  <div id="newMethod" class="container">
    <div class="row">
      <div class="column">
        <div class="form-group">
          <label for="">Method</label>
          <input
            class="form-control"
            type="text"
            placeholder="Method"
            v-model="method"
          >
          <button class="btn btn-primary mt-2" @click="create">Create</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {% raw %}
    <script>
      new Vue({
        el: "#newMethod",
        data() {
          return {
            method: ""
          }
        },
        methods: {
          async create() {
            const request = {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                method: this.method,
              })
            };

            const response = await fetch("/api/methods", request);

            if (response.status == 201) {
              window.history.back();
            } else {
              alert(response.status);
            }
          }
        }
      })
    </script>
  {% endraw %}
{% endblock %}
